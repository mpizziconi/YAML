openapi: 3.0.3
info:
  title: Specifiche Servizi Appalto - OpenAPI 3.0
  x-summary: >-
    Questo servizio ritorna la data e l'ora attuali in UTC.
  description: |-
   Vengono descritti i servizi B2B richiamati per le fasi di Appalto dall Stazione Appaltante. 
   https://yakworks.github.io/gorm-rest-api/design-principles/schema/
      #### Documentazione
    Il servizio Ora esatta ritorna l'ora del server in formato RFC5424 (syslog).

    `2018-12-30T12:23:32Z`

    Qui va' inserita la documentazione principale del servizio.
    Il testo dev'essere diviso in piu' parti, tutte scritte in Markdown.

    Le Api sono utilizzati per l'intergrazione B2B con i Sistemi Appaltanti per le fasi di Definizione e Pubblicazione Appalto, Aggiudicazione Appalto e Esecuzione Contratto dell'Appalto.
    Il Servizio Appaltante deve chiamare nella sequenza e nella modalità descritte in dettaglio nella documentazione fornita.

    ##### ESPD (European Single Procurement Document)
    Le specifiche dei documenti relativi all'ESPD Request e all'ESPD Response sono descritte https://www.agid.gov.it/sites/default/files/repository_files/edgue-it_specifiche_tecniche_v1.0.0_0.pdf

    Agid - www.agid.gov.it
    
    CEF - https://ec.europa.eu/inea/connecting-europe-facility/cef-telecom
      
    IIeP - https://ec.europa.eu/inea/en/connecting-europe-facility/cef-telecom/2015-it-ia-0108
      
    Direttiva 24/2014, Unione Europea – https://eur-lex.europa.eu/legal-content/IT/TXT/?uri=celex%3A32014L0024
      
      E-Certis - https://ec.europa.eu/tools/ecertis/search
      
      ESPD - http://ec.europa.eu/growth/single-market/public-procurement/e-procurement/espd/
      
      ESPDe - https://ec.europa.eu/tools/espd/filter?lang=it#
    ##### eForm (nuovo standard europeo per la pubblicazione di appalti)
    
    
    #### Note

    Il servizio non richiede autenticazione, ma va' usato rispettando gli
    header di throttling esposti in conformita' alle Linee Guida del Modello di interoperabilita'.

    Usa questa sezione per annotazioni specifiche, riferimenti normativi e/o
    per manleve ed esclusioni di responsabilita' eventualmente non incluse in -termsOfService`.

    #### Informazioni tecniche ed esempi

    Esempio:

    ```
    http://localhost:8443/datetime/v1/echo
    {
      'datetime': '2018-12-30T12:23:32Z'
    }
    ```

    Qui e' possibile introdurre brevi informazioni tecniche ed esempi.
  # I termini del servizio contengono un riferimento
  #   a tutte le indicazioni e le note legali per l'utilizzo
  #   del servizio, inclusi gli eventuali riferimenti utili al GDPR.
  termsOfService: 'http://swagger.io/terms/'
  # Chi posso contattare per informazioni sul servizio e sul suo stato?
  contact:
    email: ufficio.uscp@anticorruzione.it
    name: ANAC - Ufficio Servizi IT Contratti Pubblici
    url: https://www.anticorruzione.it
  # L'audience delle API. Attualmente e' definito solamente
  #   la tipologia `public`.
  x-audience:
    - public
  # Ogni API deve avere un UUID, invariante nel tempo e
  #   rispetto al `title`.
  x-api-id: 00000000-0000-0000-0000-000000000000
  license:
    name: Licenza Pubblica dell'Unione Europea v. 1.2
    url: 'https://eupl.eu/1.2/it/'
  # Per dare indicazioni sul ciclo di vita dell'API
  # si puo' usare un parametro come:
  x-lifecycle:
    published: 2023-03-31
    maturity: published  
  version: 1.0.0
servers:
  - url: https://repositorydocument.swagger.io/api/v1
    description: Development server
tags:
  - name: pianificazioneAppalto
    description: Operazioni invocate nella fase di Pianificazione
  - name: comunicaAppalto
    description: Operazioni invocate nella fase di PrePubblicazione
  - name: pubblicaAvviso 
    description: Operazioni invocate nella fase di Pubblicazione
  - name: comunicaPostPubblicazione
    description: Operazioni invocate nella fase di PostPubblicazione
  - name: serviziComuni
    description: Operazioni comuni invocate in tutte le fasi
  - name: serviziTecnici 
    description: Operazioni richiesti dalle linee guida sull'interoperabilità
  - name: presaInCarico 
    description: Operazioni propedeutiche alla creazione dell'Appalto
paths:
  /status:
    get:
      summary: Ritorna lo stato dell'applicazione. SINCRONO
      description: |
        Ritorna lo stato dell'applicazione. A scopo
        di test, su base randomica puo' ritornare
        un errore.
      operationId: idStatusShow
      tags:
        - serviziTecnici
      responses:
        '200':
            description: |
              Il server ha ritornato lo status. In caso di problemi
              ritorna sempre un problem+json.
            headers: &ratelimit_headers 
              X-RateLimit-Limit:
                 $ref: '#/components/headers/X-RateLimit-Limit'
              X-RateLimit-Remaining:
                 $ref: '#/components/headers/X-RateLimit-Remaining'
              X-RateLimit-Reset:
                 $ref: '#/components/headers/X-RateLimit-Reset'
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/BaseResponse'
        '429':
            description: Limite di richieste raggiunto
            headers:
              Retry-After:
                $ref: '#/components/headers/Retry-After'
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/BaseResponse'        
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/BaseResponse'          
  /crea-piano:
    post:
      tags:
         - pianificazioneAppalto
      summary: API Rest per la creazione della Pianificazione. SINCRONO 
      description: Inserimento della Pianificazione nel formato definito da Anac e Inserimento dell'eventuale avviso di pre-informazione in TED nel formato eForm. SINCRONO 
      operationId: idPianoCrea
      requestBody:
        description: Inserimento Appalto con tutti i dati aggiuntivi
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatiPianoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idAppalto generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreaPianoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /modifica-piano:
    post:
      tags:
         - pianificazioneAppalto
      summary: API Rest per la modifica della Pianificazione. SINCRONO 
      description: Sostituisce la precedentemente Pianificazione inviata. SINCRONO 
      operationId: idPianoModifica
      requestBody:
        description: Oggetto generico in ingresso al servizio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatiPianoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idPianificazione generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModificaPianoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'  
      security:
        - apiKeyAuth: []
  /cancella-piano:
    post:
      tags:
        - pianificazioneAppalto
      summary: API Rest per l'eliminazione di una Pianificazione in lavorazione. SINCRONO
      description: Eliminazione della Pianificazione in lavorazione. SINCRONO
      operationId: idPianoCancella
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idPianificazione:
                  description: identificativo univoco della Pianificazione definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
                motivo:  
                  description: descrizione del motivo della richiesta di cancellazione
                  type: string
                  maxLength: 200
                  example: 'Pianificazione non approvata'
              required:
                - idPianificazione
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancellaPianoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-piano:
    get:
      tags:
        - pianificazioneAppalto
      summary: API Rest per il recupero del dettaglio della Pianificazione. SINCRONO
      description: API Rest per il recupero del dettaglio della Pianificazione. SINCRONO
      operationId: idPianoDettaglio
      parameters:
        - in: query
          name: idPianificazione
          description: identificativo univoco della Pianificazione definito da ANAC. (A UUID specified by RFC4122)
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsultaPianoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-piano:
    get:
      tags:
        -  pianificazioneAppalto
      summary: API Rest per la ricerca delle Pianificazioni. SINCRONO
      description: Viene recuperata la lista con i dati di sintesi delle Pianificazioni. SINCRONO
      operationId: idPianoRicerca
      parameters:
        - in: query
          name: stato
          description: stato della Pianificazione
          schema:
            $ref: '#/components/schemas/StatoPianoEnum'
        - in: query
          name: tipo
          description: tipologia della Pianificazione
          schema:
            $ref: '#/components/schemas/TipoPianoEnum'    
        - in: query
          name: dataCreazioneDa
          description: Data di crezione della Pianificazione con intervallo successivo (A datetime specified by RF3339)
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'
        - in: query
          name: dataCreazioneA
          description: Data di crezione della Pianificazione con intervallo precedente (A datetime specified by RF3339) 
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'  
        - in: query
          name: page
          description: numero di pagine da visualizzare
          schema:
            type: integer
            format: int32
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PianoListaResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /verifica-piano:
    post:
      tags:
        - pianificazioneAppalto
      summary: API Rest per la validazione della Pianificazione. ASINCRONO - ASIMMETRICO
      description: L'ultima istanza della Pianificazione inviata viene validata. In base alla tipologia della Pianificazione viene eseguita una validazione sintattica dei dati di input. In base al contenuto la validazione può avvenire mediante API proprietarie o servizio REST esterno - ASINCRONO - ASIMMETRICO
      operationId: idPianoVerifica
      parameters:
        - in: query
          name: idPianificazione
          description: identificativo univoco della Pianificazione definito da ANAC. (A UUID specified by RFC4122)
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'       
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /conferma-piano:
    post:
      tags:
        - pianificazioneAppalto
      summary: API Rest per la conferma dei dati inviati per una specifica Pianificazione. ASINCRONO - ASIMMETRICO
      description: Il servizio consente di confermare i dati inviati per una specifica Pianificazione e, qualora il tipo di piano lo consente, avvia la fase di pubblicazione dell'avviso e restituisce l'identificativo ad esso assegnato. ASINCRONO - ASIMMETRICO
      operationId: idPianoConferma
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idPianificazione:
                  description: identificativo univoco della Pianificazione definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
              required:
                - idPianificazione
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Se previsto viene restituito l'idAvviso generato da ANAC.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfermaPianoResponse'
          links:
            StatoAvvisoIdLink:  
              operationId: idAvvisoStato
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /stato-avviso`.  
            PubblicaAvvisoIdLink:  
              operationId: idAvvisoPubblica
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /pubblica-avviso`.         
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /crea-appalto:
    post:
      tags:
         - comunicaAppalto
      summary: API Rest per la creazione di un Appalto. SINCRONO 
      description: Il servizio permette l'inserimento della prima istanza in lavorazione di un Appalto nel formato ESPD-Request, per tutte le tipologie anche affidamento diretto per le pubblicazioni nazionali, nel formato eForm per le pubblicazioni europee in TED, più un formato definito da ANAC con le informazioni aggiuntive. SINCRONO 
      operationId: idAppaltoCrea
      requestBody:
        description: Inserimento Appalto con tutti i dati aggiuntivi
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatiAppaltoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idAppalto generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreaAppaltoResponse'
          links:
            VerificaAppaltoIdLink:  
              operationId: idAppaltoVerifica
              parameters:
                idAppalto: '$response.body#/idAppalto'
              description: >
                Il valore di `idAppalto` restituito nella riposta può essere usato per richiamare `GET /verifica-appalto`.
            ConfermaAppaltoIdLink:  
              operationId: idAppaltoConferma
              parameters:
                idAppalto: '$response.body#/idAppalto'
              description: >
                Il valore di `idAppalto` restituito nella riposta può essere usato per richiamare `GET /conferma-appalto`.
            StatoAppaltoIdLink:  
              operationId: idAppaltoStato
              parameters:
                idAppalto: '$response.body#/idAppalto'
              description: >
                Il valore di `idAppalto` restituito nella riposta può essere usato per richiamare `GET /stato-appalto`.    
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /modifica-appalto:
    post:
      tags:
         - comunicaAppalto
      summary: API Rest per la modifica dell'Appalto. SINCRONO 
      description: Il servizio permette la sostituzione della precedente istanza dell’Appalto con una nuova. L'Appalto è nel formato ESPD-Request, per tutte le tipologie anche affidamento diretto per le pubblicazioni nazionali, nel formato eForm per le pubblicazioni europee in TED, più un formato definito da ANAC con le informazioni aggiuntive. SINCRONO 
      operationId: idAppaltoModifica
      requestBody:
        description: Modifica dell'Appalto con tutti i dati aggiuntivi
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatiAppaltoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idAppalto generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModificaAppaltoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'  
      security:
        - apiKeyAuth: []
  /cancella-appalto:
    post:
      tags:
        - comunicaAppalto
      summary: API Rest per l'eliminazione di un Appalto in lavorazione. SINCRONO
      description: Eliminazione logica di un Appalto e dei lotti in lavorazione. SINCRONO
      operationId: idAppaltoCancella
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idAppalto:
                  description: identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
                motivo:  
                  description: descrizione del motivo della richiesta di cancellazione
                  type: string
                  maxLength: 200
                  example: 'Revoca delle procedure di gara'
              required:
                - idAppalto
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancellaAppaltoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-appalto:
    get:
      tags:
        -  comunicaAppalto
      summary: API Rest per la ricerca delle Gare-Lotto dell'Appalto. SINCRONO
      description: viene recuperata la lista con i dati di sintesi dell'Appalto e dei rispetti lotti. SINCRONO
      operationId: idAppaltoRicerca
      parameters:
        - in: query
          name: codiceAppalto
          description: il codice dell'Appalto         
          schema:
            type: integer
            format: int32
        - in: query    
          name: idAppalto
          description: Identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by FC4122).
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"  
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto rilasciato da ANAC
          schema:
            type: string
            example: 9050626CD6
        - in: query
          name: stato
          description: stato dell'Appalto 
          schema:
            $ref: '#/components/schemas/StatoAppaltoEnum'
        - in: query
          name: dataCreazioneDa
          description: Data di crezione dell'Appalto con intervallo successivo (A datetime specified by RF3339)
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'
        - in: query
          name: dataCreazioneA
          description: Data di crezione dell'Appalto con intervallo precedente (A datetime specified by RF3339) 
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'  
        - in: query
          name: page
          description: numero di pagine da visualizzare
          schema:
            type: integer
            format: int32
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppaltoListaResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-appalto:
    get:
      tags:
         - comunicaAppalto
      summary: API Rest per il recupero del dettaglio dell'Appalto. SINCRONO
      description: Servizio per la consultazione delle informazioni di dettaglio di un Appalto e dei relativi Lotti . SINCRONO
      operationId: idAppaltoDettaglio
      parameters:
        - in: query
          name: idAppalto
          description: Identificativo univoco dell'Appalto definito da ANAC alternativo al CIG. (A UUID specified by FC4122).
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto rilasciato da ANAC, alternativo all'idAppalto
          schema:
            type: string
            example: 9050626CD6
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsultaAppaltoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'       
      security:
        - apiKeyAuth: []
  /verifica-appalto:
    post:
      tags:
        - comunicaAppalto
      summary: API Rest per la validazione dell'Appalto. ASINCRONO - ASIMMETRICO
      description: L'ultimo istanza di appalto inviata viene validata. In base allla tipologia dell'appalto viene eseguita una validazione sintattica dei dati di input dell'appalto (eForm, ESPDRequest, anacForm). la validazione può avvenire mediante API proprietarie (ESPDRequest)o servizio REST esterno di TED (EForm) o mediante una componente custom (AnacForm)- ASINCRONO - ASIMMETRICO 
      operationId: idAppaltoVerifica
      parameters:
        - in: query
          name: idAppalto
          description: identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'          
      security:
        - apiKeyAuth: []
  /conferma-appalto:
    post:
      tags:
        - comunicaAppalto
      summary: API Rest per la conferma dei dati di Appalto propedeutica alla generazione dei CIG. ASINCRONO - ASIMMETRICO
      description: Il servizio permette la conferma dei dati dell'Appalto inviati e avvia la fase di validazione, generazione CIG e modifica dell'ESPD-request e del'eForm con il popalemento dei CIG creati. ASINCRONO - ASIMMETRICO 
      operationId: idAppaltoConferma
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idAppalto:
                  description: identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
              required:
                - idAppalto
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Se previsto viene restituito l'idAvviso generato da ANAC.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfermaAppaltoResponse'
          links:
            StatoAvvisoIdLink:  
              operationId: idAvvisoStato
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /stato-avviso`.
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'   
      security:
        - apiKeyAuth: []
  /stato-appalto:
    get:
      tags:
         - serviziComuni
      summary: API Rest per il recupero dello stato dell'Appalto. SINCRONO
      description: Servizio per il recupero dello stato in cui si trova l’Appalto. SINCRONO
      operationId: idAppaltoStato
      parameters:
        - in: query
          name: idAppalto
          description: Identificativo univoco dell'Appalto definito da ANAC
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatoAppaltoResponse'  
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /recupera-cig:
    get:
      tags:
        - comunicaAppalto
        - pubblicaAvviso
      summary: API Rest per il recupero dei CIG generati da ANAC e assegnati ai lotti dell’Appalto. SINCRONO
      description: Per un Appalto il servizio restituiti le coppie Lotto - CIG. SINCRONO
      operationId: idCIGRecupera
      parameters:
        - in: query
          name: idAppalto
          description: Identificativo univoco dell'Appalto definito da ANAC
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        - in: query
          name: page
          description: numero di pagine da visualizzare
          schema:
            type: integer
            format: int32
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32    
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CigListaResponse' 
            application/xml:
              schema:
                description: Risposta generica servizio
                type: object
                additionalProperties: false
                properties:
                  code:
                    description: codice di ritorno dell'operazione 
                    type: integer
                    format: int32
                    example: 200
                  type:
                    description: descrizione dell'esito dell'operazione eseguita
                    type: string
                    example: operazione terminata con successo |  
                  message:
                    description: messaggio di errore in caso di operazione non venga eseguita correttamente  
                    type: string
                xml:
                  name: '##default'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /pubblica-avviso:
    post:
      tags:
        - pubblicaAvviso
      summary: API Rest per la richiesta di pubblicazione di un'avviso di gara sia a livello nazionale sia europeo. ASINCRONO - ASIMMETRICO
      description: Il servizio avvia la richiesta di pubblicazione di un Avviso relativo all’ultima istanza dell’Appalto validato e confermato mediante il servizio conferma-appalto. In base ai dati contenuti nell'avviso la modalità di pubblicazione potrà essere in TED e/o PPL-ANAC. ASINCRONO - ASIMMETRICO  
      operationId: idAvvisoPubblica
      parameters:
        - in: query
          name: idAvviso
          description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'        
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /modifica-avviso:
    post:
      tags:
        - pubblicaAvviso
      summary: API Rest per la creazione di un avviso che sostituisce il precedente non ancora pubblicato sia a livello nazionale e sia europeo. ASINCRONO - ASIMMETRICO
      description: API Rest per la richiesta di pubblicazione di un'avviso sia a livello nazionale sia europeo. L'avviso sostituisce il precedente non ancora pubblicato. Il servizio gestisce la pubblicazione europea mediante l'acquisizione di dati nel formato definito da TED (eForm) e, la pubblicazione nazionale mediante l'acquisizione di dati definiti dall'ESPD Request più dati  aggiuntivi richiesti da ANAC. ASINCRONO ASIMMETRICO
      operationId: idAvvisoModifica
      requestBody:
        description: Inserimento Avviso con gli oggetti specifici per la pubblicazione in TED o in ambito Nazionale
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AvvisoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idAvviso generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModificaAvvisoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /rettifica-avviso:
    post:
      tags:
        - pubblicaAvviso
      summary: API Rest per la creazione di un avviso che rettifica il precedente pubblicato sia a livello nazionale e sia europeo. ASINCRONO - ASIMMETRICO
      description: API Rest per la richiesta di pubblicazione di un'avviso di rettifica sia a livello nazionale sia europeo. L'avviso rettifica il precedente già pubblicato. Il servizio gestisce la pubblicazione europea mediante l'acquisizione di dati nel formato definito da TED (eForm) e, la pubblicazione nazionale mediante l'acquisizione di dati definiti dall'ESPD Request più dati aggiuntivi richiesti da ANAC. ASINCRONO ASIMMETRICO
      operationId: idAvvisoRettifica
      requestBody:
        description: Inserimento Avviso con gli oggetti specifici per la pubblicazione in TED o in ambito Nazionale
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AvvisoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idAvviso generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RettificaAvvisoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /cancella-avviso:
    post:
      tags:
        - pubblicaAvviso
      summary: API Rest per la richiesta di annullamento di pubblicazione di un avviso non ancora pubblicato. ASINCRONO - ASIMMETRICO
      description: Il servizio permette di sospensione una una richiesta di pubblicazione, sia nazionale sia europea, di un avviso non ancora pubblicato. ASINCRONO ASIMMETRICO
      operationId: idAvvisoCancella
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idAvviso:
                  description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
                motivo:  
                  description: descrizione del motivo della richiesta di cancellazione
                  type: string
                  maxLength: 200
                  example: 'Revoca delle procedure di gara'
              required:
                - idAvviso
        required: true
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-avviso:
    get: 
      tags:
        - pubblicaAvviso
      summary: API Rest per la ricerca degli avvisi dell'appalto. SINCRONO
      description: viene recuperata la lista con i dati di sintesi degli Avvisi. SINCRONO
      operationId: idAvvisoRicerca
      parameters:
        - in: query
          name: codiceAppalto
          description: il codice dell'Appalto         
          schema:
            type: integer
            format: int32
        - in: query    
          name: idAppalto
          description: Identificativo univoco dell' Appalto definito da ANAC. Restituito dall'operazione di creazione Appalto. (A UUID specified by FC4122).
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"  
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto rilasciato da ANAC
          schema:
            type: string
            example: 9050626CD6
        - in: query
          name: stato
          description: stato dell'Appalto 
          schema:
            $ref: '#/components/schemas/StatoAppaltoEnum'
        - in: query
          name: dataCreazioneDa
          description: Data di crezione dell'Appalto con intervallo successivo (A datetime specified by RF3339)
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: dataCreazioneA
          description: Data di crezione della Appalto con intervallo precedente (A datetime specified by RF3339) 
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: statoAvviso
          schema:
            $ref: '#/components/schemas/StatoAvvisoEnum'
        - in: query
          name: tipoAvviso
          schema:
            $ref: '#/components/schemas/TipoAvvisoEnum'
        - in: query
          name: azioneAvviso
          schema:
            $ref: '#/components/schemas/TipoAzioneAvvisoEnum'
        - in: query
          name: dataCreazioneAvvisoDa
          description: Data di crezione dell'Avviso con intervallo successivo (A datetime specified by RF3339)
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: dataCreazioneAvvisoA
          description: Data di crezione della Avviso con intervallo precedente (A datetime specified by RF3339) 
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'    
        - in: query
          name: page
          description: numero di pagine da visualizzare
          schema:
            type: integer
            format: int32
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32    
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AvvisoListaResponse'  
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-avviso:
    get:
      tags:
        - pubblicaAvviso
      summary: API Rest per il recupero del dettaglio di un Avviso. SINCRONO
      description: Viene resituita la definizione di un Avviso con tutte le sue informazioni di dettaglio.
      operationId: idAvvisoDettaglio
      parameters:
        - in: query
          name: idAvviso
          description: Identificativo dell'Avviso generato da ANAC.
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsultaAvvisoResponse'   
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-rendering-avviso:
    get:
      tags:
        - pubblicaAvviso
      summary: API Rest per il recupero del PDF di un Avviso. SINCRONO
      description: Viene resituito il file in foramto PDF relativo all' Avviso.
      operationId: idAvvisoAnteprima
      parameters:
        - in: query
          name: idAvviso
          description: Identificativo dell'Avviso generato da ANAC.
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecuperaAvvisoResponse'   
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /stato-avviso:
    get:
      tags:
         - pubblicaAvviso
      summary: API Rest per il recupero dello stato dell'Avviso. SINCRONO
      description: Servizio per il recupero dello stato in cui si trova l’Avviso. SINCRONO
      operationId: idAvvisoStato
      parameters:
        - in: query
          name: idAvviso
          description: Identificativo dell'Avviso generato da ANAC.
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatoAvvisoResponse'  
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /crea-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest generica per l'inserimento di una scheda dati per le fasi successive alla pubblicazione. SINCRONO
      description: API Rest generica per l'inserimento dei dati delle fasi successive alla pubblicazione (AGGIUDICAZIONE e ESECUZIONE) . Per la fase di ESECUZIONE i dati sono specifiche per le varie schede del contratto (Creazione Contratto, Avvio Contratto, Avanzamento Contratto, Conclusione Contratto, Collaudo Contratto, Sospensione Contratto, Ripresa Contratto, Risoluzione Contratto, Modifica Contratto).
        La sequenza degli inserimenti viene gestita da un motore in modo automatico. SINCRONO
      operationId: idSchedaCrea
      requestBody:
        description: Oggetto in ingresso al servizio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SchedaRequest'
        required: true
      responses:
        '200':
            description: Operazione terminato con successo
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/CreaSchedaResponse'  
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /modifica-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest generica per la modifica di una scheda dati per le fasi successive alla pubblicazione. SINCRONO
      description: Il servizio sostituisce la precedentemente Scheda inviata. SINCRONO
      operationId: idSchedaModifica
      requestBody:
        description: Oggetto in ingresso al servizio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SchedaRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModificaSchedaResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'  
      security:
        - apiKeyAuth: []
  /cancella-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per l'eliminazione di una specifica Scheda dati in lavorazione nelle fasi successive alla pubblicazione. SINCRONO
      description: Eliminazione della Scheda dati in lavorazione. SINCRONO
      operationId: idSchedaCancella
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idScheda:
                  description: identificativo univoco della scheda definita da ANAC. (A UUID specified by RFC4122).
                  type: string
                  format: uuid
                  example: "68aa8c04-0d00-40f6-8d81-b59de3a3dcce"  
                motivo:  
                  description: descrizione del motivo della richiesta di cancellazione
                  type: string
                  maxLength: 200
                  example: 'Errore inserimento dati'
              required:
                - idAppalto
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancellaSchedaResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-scheda:
    get:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per la ricerca delle Schede dati inserite nelle fasi successive alla pubblicazione. SINCRONO
      description: Viene recuperata la lista con i dati di sintesi delle schede. SINCRONO
      operationId: idSchedaRicerca
      parameters:
        - in: query    
          name: idAppalto
          description: Identificativo univoco della gara definito da ANAC. (A UUID specified by FC4122).
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"  
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto rilasciato da ANAC
          schema:
            type: string
            example: 9050626CD6
        - in: query
          name: stato
          description: stato dell'Appalto
          schema:
            $ref: '#/components/schemas/StatoAppaltoEnum'
        - in: query
          name: dataCreazioneDa
          description: Data di crezione dell'Appalto con intervallo successivo (A datetime specified by RF3339)
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: dataCreazioneA
          description: Data di crezione della Gara con intervallo precedente (A datetime specified by RF3339) 
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: tipoScheda
          description: Il Tipo di scheda che si vuole recuperare (DA DEFINIRE)
          schema:
            $ref: '#/components/schemas/TipoSchedaEnum'
        - in: query
          name: statoScheda
          description: stato in cui si trova la scheda (DA DEFINIRE) 
          schema:
            $ref: '#/components/schemas/StatoSchedaEnum'
        - in: query
          name: page
          description: numero di pagine da visualizzare
          schema:
            type: integer
            format: int32
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchedaListaResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-scheda:
    get:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per il recupero del dettaglio di una specifica Scheda dati. SINCRONO
      description: Viene recuperato il dettaglio della specifica scheda dati. SINCRONO
      operationId: idSchedaDettaglio
      parameters:
        - in: query
          name: idScheda
          description: Identificativo della singola scheda restituita da ANAC nella fase di inserimento
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsultaSchedaResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /verifica-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per la validazione di una Scheda dati. ASINCRONO - ASIMMETRICO
      description: L'ultimo istanza della Scheda inviata viene validata. La validazione è orchestrata da un Workflow Engine che, tramite il suo motore di regole, verifica sia se la scheda dati è coerente con lo stato dell’Appalto sia la correttezza sintattica dei dati di input.  ASINCRONO - ASIMMETRICO
      operationId: idSchedaVerifica
      parameters:
        - in: query
          name: idScheda
          description: identificativo univoco della Scheda definito da ANAC. (A UUID specified by RFC4122)
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'       
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /conferma-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per la conferma dei dati inviati per una specifica Scheda. ASINCRONO - ASIMMETRICO
      description: Il servizio consente di confermare i dati inviati per una specifica Scheda e, qualora il tipo di scheda lo consente, avvia la fase di pubblicazione dell'avviso e restituisce l'identificativo ad esso assegnato. ASINCRONO - ASIMMETRICO 
      operationId: idSchedaConferma
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idScheda:
                  description: identificativo univoco della scheda definita da ANAC. (A UUID specified by RFC4122).
                  type: string
                  format: uuid
                  example: "68aa8c04-0d00-40f6-8d81-b59de3a3dcce" 
              required:
                - idScheda
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Se previsto Viene restituito l'idAvviso generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfermaSchedaResponse'
          links:
            StatoAvvisoIdLink:  
              operationId: idAvvisoStato
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /stato-avviso`.  
            PubblicaAvvisoIdLink:  
              operationId: idAvvisoPubblica
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /pubblica-avviso`.          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /esito-operazione:
    get:
      tags:
        - serviziComuni
      summary: API Rest per il recupero dell'esito dell'operazione. SINCRONO
      description: In base all'operazione viene restituita l'esito. SINCRONO
      operationId: idOperazioneEsito
      parameters:
        - in: query
          name: idAppalto
          description: identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        - in: query
          name: tipoOperazione
          description: Tipo operazione di cui si vuole conoscere l'esito
          required: true
          schema:
            $ref: '#/components/schemas/TipoOperazioneEnum'
        - in: query
          name: tipoRicerca
          description: Tipo di ricerca da eseguire
          required: true
          schema:
            type: string
            minimum: 1
            enum: ['ULTIMO_ESITO','TUTTI_ESITI']
            description: >
                tipoRicerca - Tipo Ricerca da eseguire :
                 * 'ULTIMO_ESITO' - viene estratto l'ultimo esito . DEFAULT
                 * 'TUTTI_ESITI' - vengono estratti tutti gli esiti per l'operazione richiesta ordinati per data emissione decrescente 
      responses:
        '200':
          description: Esecuzione avvenuta con successo
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EsitoOperazioneListaResponse'
        '404':
            description: Identificativo non trovato
            headers: *ratelimit_headers
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse'
        '400':
            description: Richiesta malformata
            headers: *ratelimit_headers
            content:
             application/problem+json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse'
        '429':
            description: Limite di richieste raggiunto
            headers:
              Retry-After:
                $ref: '#/components/headers/Retry-After'
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse'
        '500':
            description: Errore interno avvenuto
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse'
      security:
        - apiKeyAuth: []
  /associa-responsabile-soggetto:
    post:
      tags:
         - presaInCarico
      summary: API Rest che associa l'utente corrente nel ruolo di Responsabile del progetto. SINCRONO 
      description: Associa il Soggetto al ruolo in base alla data inizio. SINCRONO 
      operationId: idResponsabileAssocia
      parameters:
        - in: query
          name: idAppalto
          description: Identificativo dell'Appalto generato da ANAC.
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto generato da ANAC
          schema:
            type: string
            example: "9050626CD6"    
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AssociaResponsabileResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-soggetti:
    get:
      tags:
        -  presaInCarico
      summary: API Rest per la ricerca dei spggetti incaricati. SINCRONO
      description: viene recuperata la lista con i dati di sintesi dei soggetti incaricati. SINCRONO
      operationId: idIncaricatoRicerca
      parameters:
        - in: query    
          name: idAppalto
          description: Identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by FC4122).
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"  
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto rilasciato da ANAC
          schema:
            type: string
            example: 9050626CD6
        - in: query
          name: page
          description: numero di pagine da visualizzare
          schema:
            type: integer
            format: int32
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IncaricatoListaResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /aggiungi-soggetto:
    post:
      tags:
         - presaInCarico
      summary: API Rest che associa il Soggetto al ruolo in base alla data inizio. SINCRONO 
      description: Associa il Soggetto al ruolo in base alla data inizio. SINCRONO 
      operationId: idSoggettoAggiungi
      requestBody:
        description: Associa il Soggetto al ruolo in base alla data inizio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SoggettoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggiungiSoggettoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /elimina-soggetto:
    post:
      tags:
         - presaInCarico
      summary: API Rest che rimuove il Soggetto con il ruolo alla data fine. SINCRONO 
      description: Rimuove il Soggetto con il ruolo alla data fine. SINCRONO 
      operationId: idSoggettoElimina
      requestBody:
        description: Rimuove il Soggetto con il ruolo alla data fine 
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SoggettoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EliminaSoggettoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
components:
  headers:
    Retry-After:
      description: |-
        Retry contacting the endpoint *at least* after seconds.
        See https://tools.ietf.org/html/rfc7231#section-7.1.3
      schema:
        format: int32
        maximum: 186400
        minimum: 0
        type: integer
    Sunset:
      description: The Sunset HTTP response header field, indicates that a URI is likely
        to become unresponsive at a specified point in the future.  It also defines
        a sunset link relation type that allows linking to resources providing information
        about an upcoming resource or service sunset.
      schema:
        example: Sun, 06 Nov 1994 08:49:37 GMT
        externalDocs:
          url: https://tools.ietf.org/html/rfc7231#appendix-D
        format: HTTP-date
        maxLength: 30
        type: string
    X-RateLimit-Limit:
      description: The number of allowed requests in the current period
      schema:
        format: int32
        maximum: 1000000
        minimum: 0
        type: integer
    X-RateLimit-Remaining:
      description: The number of remaining requests in the current period
      schema:
        format: int32
        maximum: 1000000
        minimum: 0
        type: integer
    X-RateLimit-Reset:
      description: The number of seconds left in the current period
      schema:
        format: int32
        maximum: 186400
        minimum: 0
        type: integer  
    X-Ratelimit-Used: 
      description: The number of requests used in the current period
      schema:
        type: integer
        format: int32      
  responses:
    200AckResponse:
      description: Richiesta accettata
      headers: *ratelimit_headers
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AckResponse'
    400BadRequest:
      description: Richiesta malformattata
      headers: *ratelimit_headers
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    404NotFound:
      description: Dato non trovato
      headers: *ratelimit_headers
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    429TooManyRequests:
      description: Limite di richieste raggiunto
      headers:
        Retry-After:
            $ref: '#/components/headers/Retry-After'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    500InternalServerError:
      description: Errore generico. Operazione terminato con errore. Viene restitutito il dettaglio dell'errore
      headers: *ratelimit_headers
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    503ServiceUnavailable:
      description: Service Unavailable
      headers:
        Retry-After:
            $ref: '#/components/headers/Retry-After'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    default:
      description: |-
       Errore inatteso. Non ritornare informazioni
       sulla logica interna e/o non pertinenti all'interfaccia.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
  schemas:
    StatoPianoEnum:  
      type: string
      minimum: 1
      enum: ['IN LAVORAZIONE', 'CONFERMATO', 'CANCELLATO','COLLAUDATO']
    StatoAppaltoEnum: 
      type: string
      minimum: 1
      enum: ['IN LAVORAZIONE', 'CONFERMATO', 'CANCELLATO', 'IN ATTESA DI PUBBLICAZIONE','IN PUBBLICAZIONE FERMATA','PUBBLICATO','NON AGGIUDICATO', 'AGGIUDICATO', 'IN SOTTOSCRIZIONE CONTRATTO','IN ESECUZIONE','ANNULLATO','SOSPESO', 'CONCLUSO','COLLAUDATO']
      description: >
        stato- Stato in cui si trova la Appalto:
         * 'IN LAVORAZIONE' - Appalto inviato in aatesa di CIG
         * 'CONFERMATA' - Appalto inviato in aatesa di CIG
         * 'CANCELLATA' - CIG assegnato alla Gara-Lotto
         * 'IN ATTESA DI PUBBLICAZIONE' - Appalto pubblicato in TED/Gazzetta Italiana/Altro
         * 'PUBBLICATA' - Appalto pubblicato in TED/Gazzetta Italiana/Altro
         * 'AGGIUDICATA' - Appalto aggiudicato a un Operatore Econominco
         * 'NON AGGIUDICATA' - Appalto aggiudicato a un Operatore Econominco
         * 'IN SOTTOSCRIZIONE CONTRATTO' - In fase di definizione del contratto dell'appalto 
         * 'IN ESECUZIONE' - il contratto di un appalto é in esecuzione
         * 'ANNULLATA' - il 
         * 'SOSPESA' - L'esecuzione dei lavori di un appalto sono sospesi
         * 'CONCLUSA' - 
         * 'COLLAUDATA' - L'Appalto si conclude con il collaudo dei lavori
      example: "IN LAVORAZIONE" 
    StatoLottoEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/YAML/main/npa-fvoe/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/StatoLottoEnum'
    StatoAvvisoEnum:
      type: string
      minimum: 1
      enum: ['CREATO','IN ATTESA DI PUBBLICAZIONE','PUBBLICAZIONE FERMATA','PUBBLICATO','NON PUBBLICATO']
      description: >
        stato - Stato in cui si trova l'avviso:
         * 'CREATO' - stato iniziale avviso  
         * 'IN_ATTESA_DI_PUBBLICAZIONE' - l'Avviso é da pubblicare in TED e/o Gazzetta Italiana/Altro
         * 'PUBBLICAZIONE_FERMATA' - l'Avviso in TED e/o Gazzetta Italiana/Altro é stato fermato da uno stop pubblicazione
         * 'PUBBLICATO' - l'Avviso é stato pubblicato in TED e/o Gazzetta Italiana/Altro
         * 'NON PUBBLICATO' - l' Avviso non é stato pubblicato in TED e/o Gazzetta Italiana/Altro
      example: 'PUBBLICATO'
    StatoSchedaEnum:
        type: string
        minimum: 1
        enum: ['IN LAVORAZIONE', 'CREATA', 'CONFERMATA', 'CANCELLATA']   
        description: >
          stato- Stato in cui si trova la Scheda:
           * 'IN LAVORAZIONE' - Stato iniziale della scheda
           * 'CONFERMATA' - I dati della scheda sono confermati
           * 'CANCELLATA' - i dati della scheda sono annullati
    TipoRuoloEnum:
        type: string
        minimum: 1
        enum: ['RUOLO1', 'RUOLO2', 'RUOLO3', 'RUOLO4'] 
    TipoAvvisoEnum:
        description: Tipologie di avvisi 
        type: string
        minimum: 1
        enum: ['PRE-INFORMAZIONE','PUBBLICAZIONE GARA', 'AGGIUDICAZIONE','MODIFICA CONTRATTO']
        example : 'PUBBLICAZIONE GARA'
    TipoAzioneAvvisoEnum:
        description: azione dell'avviso
        type: string
        minimum: 1
        enum: ['CREAZIONE', 'MODIFICA', 'RETTIFICA']
        example : 'CREAZIONE'     
    TipoPianoEnum:
      type: string
      minimum: 1
      enum: ['LAVORI_TRIENNALI','SERVIZI_FORNITURE_BIENNALI']
      description: >
          tipoOperazione - Tipo Operazione di cui si richiedere l'esito dell'operazione :
          * 'LAVORI_TRIENNALI' - Lavori programma triennale e aggiornamento annuale.
          * 'SERVIZI_FORNITURE_BIENNALI' - Servizi e Forniture biennale e aggiornamenti annuali.
    TipoOperazioneEnum :
      type: string
      minimum: 1
      enum: ['CREA_PIANO','MODIFICA_PIANO','CANCELLA_PIANO','CONFERMA_PIANO','VERIFICA_PIANO','CREA_APPALTO' , 'MODIFICA_APPALTO','CANCELLA_APPALTO','CONFERMA_APPALTO','VERIFICA_APPALTO','PUBBLICA_AVVISO','MODIFICA_AVVISO','RETTIFICA_AVVISO','CANCELLA_AVVISO','CREA_SCHEDA' ,'MODIFICA_SCHEDA','CANCELLA_SCHEDA','VERIFICA_SCHEDA','CONFERMA_SCHEDA'
      ]
      description: >
          tipoOperazione - Tipo Operazione di cui si richiedere l'esito dell'operazione :
           * 'CREA_PIANO' -
           * 'MODIFICA_PIANO' -
           * 'CANCELLA_PIANO' -
           * 'CONFERMA_PIANO' -
           * 'VERIFICA_PIANO' -
           * 'CREA_APPALTO' -
           * 'MODIFICA_APPALTO' -
           * 'CANCELLA_APPALTO' -
           * 'CONFERMA_APPALTO' -
           * 'VERIFICA_APPALTO' -
           * 'PUBBLICA_AVVISO' -
           * 'MODIFICA_AVVISO' -
           * 'RETTIFICA_AVVISO' -
           * 'CANCELLA_AVVISO' -
           * 'CREA_SCHEDA' -
           * 'MODIFICA_SCHEDA' -
           * 'CANCELLA_SCHEDA' -
           * 'CONFERMA_SCHEDA' -
           * 'VERIFICA_SCHEDA' -    
    TipoSchedaEnum :
      type: string
      minimum: 1
      enum: ['ELENCO_PARTECIPANTI', 'AGGIUDICAZIONE' , 'AVVIO_CONTRATTO','AVANZAMENTO_CONTRATTO','CONCLUSIONE_CONTRATTO', 'COLLAUDO_CONTRATTO','SOSPENSIONE','RIPRESA_ESECUZIONE_CONTRATTO','RISOLUZIONE CONTRATTO', 'MODIFICA_CONTRATTO' ,'SUBAPPALTO','RECESSO' ,'CONTENZIOSO']
      description: >
            stato- Stato in cui si trova la Appalto:
             * 'ELENCO_PARTECIPANTI'
             * 'AGGIUDICAZIONE' 
             * 'AVVIO_CONTRATTO'- Dati relativi alla creazione del Contratto nela fase di ESECUZIONE
             * 'AVANZAMENTO_CONTRATTO'
             * 'CONCLUSIONE_CONTRATTO' 
             * 'COLLAUDO_CONTRATTO' 
             * 'SOSPENSIONE' 
             * 'RIPRESA_ESECUZIONE_CONTRATTO' 
             * 'RISOLUZIONE CONTRATTO' 
             * 'MODIFICA_CONTRATTO' 
             * 'SUBAPPALTO'
             * 'RECESSO' 
             * 'CONTENZIOSO'
    PianoType:
      description: Oggetto che riporta tutti i dati della Pianificazione
      type: object
      additionalProperties: false
      properties:
        idPianificazione:
          description: identificativo univoco Pianificazione restituito da ANAC in fase di creazione Piano
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"      
        oggetto:
          description: descrizione della pianificazione
          type: string
          example: 'Pianificazione triennale per le forniture.....'
        dataCreazione:
          description: data creazione della pianificazione (A datetime specified by RF3339)
          type: string
          format: datetime
          example: '2022-01-23T12:02:05Z'
        dataScadenza:
          description: data scadenza della pianificazione
          type: string
          format: datetime (A datetime specified by RF3339)
          example: '2022-01-23T12:02:05Z'
        importo:
          description: | 
            importo definito per la pianificazione   ISO20022: Amount of money to be moved between the debtor and creditor, before deduction of charges, expressed in the currency as ordered by the initiating party.
          example: '120000.25'
          maxLength: 35
          minLength: 1
          pattern: ^\-{0,1}[0-9]{1,13}(\.[0-9]{0,5}){0,1}$
          type: string        
        tipo:
          $ref: '#/components/schemas/TipoPianoEnum'
        stato:
          $ref: '#/components/schemas/StatoPianoEnum'
        appalti:
          type: array
          items:
            $ref: '#/components/schemas/AppaltoType' 
        body:
          description: dati della Scheda 
          type: string
          example: 
                  '{ Il Modello dati dinamico é presente al seguente URL https://github.com/anticorruzione/npa-docs/tree/3.04.7/PDF
                  }'
    AppaltoType:
      description: Oggetto che riporta tutti i dati dell'Appalto
      type: object
      additionalProperties: false
      properties:
        codiceSA:
          description: codice identificativo Stazione Appaltante
          type: string
          example: xcdsd5#3346
        idAppalto:
          description: identificativo univoco dell' Appalto restituito da ANAC
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"      
        oggetto:
          description: descrizione della gara
          type: string
          example: Fornitura di strumento XX per XX
        dataCreazione:
          description: data creazione della gara (A datetime specified by RF3339)
          type: string
          format: datetime
          example: '2022-01-23T12:02:05Z'
        dataScadenza:
          description: data scadenza della gara
          type: string
          format: datetime (A datetime specified by RF3339)
          example: '2022-01-23T12:02:05Z'
        importo:
          description:  |
            ISO20022: Amount of money to be moved between the debtor and creditor, before deduction of charges, expressed in the currency as ordered by the initiating party.
          example: '120000.25'
          maxLength: 35
          minLength: 1
          pattern: ^\-{0,1}[0-9]{1,13}(\.[0-9]{0,5}){0,1}$
          type: string        
        tipo:
          description: tipologia di gara
          type: string
          minimum: 1
          enum: ['Appalti di lavori', 'Forniture',  'Servizi']
          example:  'Appalti di lavori'
        stato:
          $ref: '#/components/schemas/StatoAppaltoEnum'
        avviso:  
          $ref: '#/components/schemas/AvvisoType'
        lotti:
          type: array
          items:
            $ref: '#/components/schemas/LottoType'
    AvvisoType:
      type: object
      additionalProperties: false
      properties:
        idAvviso:
          description: identificativo univoco Avviso restituito da ANAC.
          type: string
          example: 'xcdsd5#334'
        codiceSA:
          description: codice identificativo Stazione Appaltante
          type: string
          example: 'xcdsd5#334'
        dataCreazione:
          description: Data di crezione dell'Avviso  (A datetime specified by RF3339)
          type: string
          format: datetime
          example: '2022-01-23T12:02:05Z'
        dataPubblicazione:
          description: Data di pubblicazione dell'Avviso  (A datetime specified by RF3339)
          type: string
          format: datetime
          example: '2022-01-23T12:02:05Z'
        stato:
          $ref: '#/components/schemas/StatoAvvisoEnum' 
        tipo:
          $ref: '#/components/schemas/TipoAvvisoEnum'
        azione:
          $ref: '#/components/schemas/TipoAzioneAvvisoEnum'
        appalto:
          $ref: '#/components/schemas/AppaltoType'  
        lotto:
          $ref: '#/components/schemas/LottoType'
      example:
          idAvviso: 'f81d4fae-7dec-11d0-a765-00a0c91e6bf6'
          codiceSA: '323ERER233'
          dataCreazione: '2022-01-23T12:02:05Z'
          dataPubblicazione: '2022-01-23T12:02:05Z'
          stato: 'PUBBLICATO'
          tipo: 'PUBBLICAZIONE GARA'
          appalto: 
            codiceSA: '323ERER233'
            idAppalto: "ceb08609-1a78-4df6-ae8d-81b0516e6f71"
            oggetto: 'Fornitura di strumento XX per XX'
            dataCreazione: '2022-04-01T12:02:05Z'
            dataScadenza: '2023-12-31T12:02:05Z'
            importo: '200000.00'
            tipo: 'Appalti di lavori'
            stato: 'IN LAVORAZIONE'
    CigType:
      description: coppia progressivoLotto-CIG
      type: object
      additionalProperties: false
      properties:
        progressivoLotto:
          description: identificativo-progressivo definito da SA riportato nell'ESPD Request inviato
          type: string
        CIG:
          description: identificativo univoco della gara-lotto definito da ANAC
          type: string
      example:
          progressivoLotto: '0001'
          CIG: 'EF89808D45'   
    LottoType:
      description: Oggetto che riporta tutti i dati del lotto
      type: object
      additionalProperties: false
      properties:
        CIG:
          description: codice identificativo lotto
          type: string
          example: '9050626CD6'
        oggetto:
          description: descrizione del lotto
          type: string
          example: 'Servizio di assistenza e supporto specialistico per rilievo aereo ed elaborazione dati'
        stato:
          $ref: '#/components/schemas/StatoLottoEnum'
        appalto:
          $ref: '#/components/schemas/AppaltoType' 
        avvisi: 
          type: array
          items:
            $ref: '#/components/schemas/AvvisoType'
    AFormType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/YAML/main/npa-fvoe/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/AFormType'
    EFormType:
      description:  dati per la pubblicazione in TED nel formato definito in ambito europeo
      type: object
      additionalProperties: false
      properties:
        body:
          description: EForm codificato Base64 e compresso XXXX nel formato XML definito da TED 
          type: string
          format: byte
          example: U3dhZ2dlciByb2Nrcw== 
    EspdRequestType:
      description: Definizione delle gara, dei sui lotti con i criteri di esclusione/inclusioni nel formato definito in ambito europeo (ESPD - Request)
      type: object
      additionalProperties: false
      properties:
        body:
          description: ESPD Request codificato Base64 nel formato XML definito da TED 
          type: string
          format: byte
          example: U3dhZ2dlciByb2Nrcw==
    DatiAppaltoType:
      description: Oggetto Complesso che riporta tutti i dati dell'appalto
      type: object
      additionalProperties: false
      properties:
        idAppalto:
          description: identificativo univoco dell'Appalto definito da ANAC. Restituito dall'operazione di creazione Appalto. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        espdRequest:
          $ref: '#/components/schemas/EspdRequestType'
        eForm:
          $ref: '#/components/schemas/EFormType'
        anacForm:
          $ref: '#/components/schemas/AFormType'
      required:
        - idAppalto
    DatiPianoType :
      description: Oggetto Complesso che riporta tutti i dati dell'appalto 
      type: object
      additionalProperties: false
      properties:
        idPianificazione:
          description: identificativo univoco della Pianificazione definito da ANAC. Restituito dall'operazione di creazione Pianificazione. (A UUID specified by RFC4122)
        eForm:
          $ref: '#/components/schemas/EFormType'
        anacForm:
          $ref: '#/components/schemas/AFormType'  
      required:
        - idPianificazione
    SchedaType: 
        $ref: 'https://raw.githubusercontent.com/domaltomare/YAML/main/npa-fvoe/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/SchedaType'
    AnagraficaType:
      description: Oggetto che riporta tutti i dati dell'Documento
      type: object
      additionalProperties: false
      properties:
        codice:
          description: codice identificativo anagrafica
          type: string
          example: xcdsd5#3346
    RuoloType:
      description: Oggetto specifico dell'anagrafica dell'OE
      type: object
      additionalProperties: false
      properties:
        ruolo:
          $ref: '#/components/schemas/TipoRuoloEnum'
        dataInizio:
          description: Data di inizio  (A datetime specified by RF3339)
          type: string
          format: datetime
          example: '2022-01-23T12:02:05Z'
        dataFine:
          description: Data di fine  (A datetime specified by RF3339)
          type: string
          format: datetime
          example: '2023-01-23T12:02:05Z'
    AnagraficaSAType:
      allOf: # estende la classe AnagraficaType
        - $ref: '#/components/schemas/AnagraficaType'
      description: Oggetto specifico dell'anagrafica dell'OE
      type: object
      additionalProperties: false
      properties:
        nome:
          description: descrizione della gara
          type: string
          example: 'MAURO'
        cognome:
          description: descrizione della gara
          type: string
          example: 'VERDI'
        ruoli:  
          type: array
          items:
            $ref: '#/components/schemas/RuoloType'
    ContentDocumentType:
      description: Oggetto che riporta tutti i dati della Pianificazione
      type: object
      additionalProperties: false
      properties:
        estensione:
          description: estensione file
          type: string
          example: "PDF"
        size:
          description: grandezza del documento
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        content:
          description: Contenuto in formato Binario del documento
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    PaginazioneType:
      description: Oggetto per la paginazione dei risultati
      type: object
      additionalProperties: false
      properties:
        totRows: 
          description: Numero totale di record risultante dalla ricerca
          type: integer
          format: int32
        totPages: 
          description: Numero totale di pagine risultanti dalla ricerca
          type: integer
          format: int32      
        currentPage: 
          description: Numero di pagina corrente
          type: integer
          format: int32
        elementPage:
          description: Numero di elementi per pagina
          type: integer
          format: int32
    ConsultaAppaltoResponse :
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:  
        appalto:
          $ref: '#/components/schemas/AppaltoType'
        espdRequest:
          $ref: '#/components/schemas/EspdRequestType'
        eForm:
          $ref: '#/components/schemas/EFormType'
        anacForm:
          $ref: '#/components/schemas/AFormType'     
    CreaPianoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idPianificazione
      properties:
        idPianificazione:
          description: Identificativo univoco della pianificazione definito da ANAC. Restituito dall'operazione di creazione Piano. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    AssociaResponsabileResponse:
      description: Risposta generica servizio
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        detail: "Associazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
    AggiungiSoggettoResponse:
      description: Risposta generica servizio
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
    EliminaSoggettoResponse:
      description: Risposta generica servizio
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'    
    ModificaPianoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idPianificazione
      properties:
        idPianificazione:
          description: Identificativo univoco della pianificazione definito da ANAC. Restituito dall'operazione di creazione Piano. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"      
    CancellaPianoResponse:
      description: Risposta all'operazione Cancella Piano
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        detail: "Cancellazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"      
    CreaAppaltoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idAppalto
      properties:
        idAppalto:
          description: Identificativo univoco dell'appalto' definito da ANAC. Restituito dall'operazione di creazione Appalto. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      example:
        detail: "Creazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
        idAppalto: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    ModificaAppaltoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idAppalto
      properties:
        idAppalto:
          description: Identificativo univoco dell'appalto' definito da ANAC. Restituito dall'operazione di creazione Appalto. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6" 
      example:
        detail: "Sostituzione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
        idAppalto: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"    
    CancellaAppaltoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        detail: "Cancellazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
    StatoAppaltoResponse : 
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      properties:
        idAppalto:
          description: identificativo univoco dell'Appalto definito da ANAC. Restituito dall'operazione di creazione Appalto. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        stato:  
           $ref: '#/components/schemas/StatoAppaltoEnum'
    StatoAvvisoResponse : 
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      properties:
        idAvviso:
          description: Identificativo dell'Avviso generato da ANAC.
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6" 
        stato:  
           $ref: '#/components/schemas/StatoAvvisoEnum' 
      example:
        status: 200
        title: "Operazione Effettuata" 
        stato: 'PUBBLICAZIONE FERMATA'
    AppaltoListaResponse :
      allOf: # estende la classe DatiAppaltoType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: risposta di una lista di oggetti paginati specifica del servizio SINCRONO
          type: array
          items:
            $ref: '#/components/schemas/AppaltoType'
    IncaricatoListaResponse :
      allOf: # estende la classe DatiAppaltoType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: risposta di una lista di soggetti incaricati. SINCRONO
          type: array
          items:
            $ref: '#/components/schemas/AnagraficaSAType'        
    PianoListaResponse:
      allOf: # estende il modello dati PaginazioneType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: risposta di una lista di oggetti paginati specifica del servizio SINCRONO
          type: array
          items:
            $ref: '#/components/schemas/PianoType'
    AvvisoListaResponse:
      allOf: # estende la classe DatiAppaltoType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: Lista di ritorno con la sintesi dei dati dell'Avviso
          type: array
          items:
            $ref: '#/components/schemas/AvvisoType'  
    CigListaResponse :
      allOf: # estende la classe DatiAppaltoType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: Lista dei progressivoLotto-CIG
          type: array
          items:
            $ref: '#/components/schemas/CigType' 
          example:
            - progressivoLotto: '0001'
              CIG: 'EF89808D45'
            - progressivoLotto: '0002'
              CIG: 'EF89908H45' 
            - progressivoLotto: '0003'
              CIG: 'EF90908G67' 
    SchedaListaResponse:
      allOf: # estende la classe DatiAppaltoType
          - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result:
          description: Lista di ritorno con la sintesi dei dati delle schede
          type: array
          items:
            $ref: '#/components/schemas/SchedaType'
    DatiAppaltoRequest:
      allOf: # estende la classe DatiAppaltoType
        - $ref: '#/components/schemas/DatiAppaltoType'
    DatiPianoRequest:
      allOf: # estende la classe DatiPianoType
        - $ref: '#/components/schemas/DatiPianoType'
    SoggettoRequest:
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        codice:
          description: identificativo univoco del soggetto. CF/CodiceAUSA/Altro
          type: string
          example: "AAA345FRT565"
        ruolo:  
          $ref: '#/components/schemas/TipoRuoloEnum'
        dataInizio: 
          description: Data di inizio  (A datetime specified by RF3339)
          type: string
          format: datetime
          example: '2022-01-23T12:02:05Z'
        dataFine: 
          description: Data di fine  (A datetime specified by RF3339)
          type: string
          format: datetime
          example: '2022-01-23T12:02:05Z'  
    SchedaRequest:
      allOf: # estende la classe SchedaType
        - $ref: '#/components/schemas/SchedaType' 
    AvvisoRequest:
      type: object
      additionalProperties: false
      required:  # List the required properties here
        - idAvviso
      properties:
        idAvviso:
          description: Identificativo dell'Avviso generato da ANAC.
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      oneOf:
        - $ref: '#/components/schemas/DatiAppaltoRequest'
        - $ref: '#/components/schemas/SchedaRequest'
    ConsultaAvvisoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:
        avviso:
          $ref: '#/components/schemas/AvvisoType'
        eForm:
          $ref: '#/components/schemas/EFormType'
        anacForm:
          $ref: '#/components/schemas/AFormType'
    RecuperaAvvisoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:  
        content:
          $ref: '#/components/schemas/ContentDocumentType'
      example:
        status: 200
        title: "Operazione Effettuata"
        content: 
          estensione: "PDF"
          size: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
          content: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    ConsultaPianoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:
        piano:
          $ref: '#/components/schemas/DatiPianoType'
    ConsultaSchedaResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:
        scheda:
          $ref: '#/components/schemas/SchedaType'
    EsitoOperazioneType:        
      type: object
      additionalProperties: false
      required:  # List the required properties here
        - codice
        - descrizione
      properties:
        codice: 
          description: codice dell'esito dell'operazione
          type: string
          example: '01'
        descrizione:
          description: descrizione dell'esito dell'operazione
          type: string
          example: 'AVVISO PUBBLICATO'
        dettaglio:
          description: descrizione dettagliata dell'esito dell'operazione
          type: string
    EsitoOperazioneListaResponse:
      type: object
      additionalProperties: false
      required:  # List the required properties here
        - idAppalto
      properties:
        idAppalto:
          description: Identificativo univoco dell'appalto definito da ANAC. Restituito dall'operazione di creazione Apalto. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        listaEsiti:
          description: Lista di ritorno esiti operazione
          type: array
          items:
            $ref: '#/components/schemas/EsitoOperazioneType'
    BaseResponse:
      type: object
      additionalProperties: false
      properties:
          detail:
              description: |
                A human readable explanation specific to this occurrence of the
                problem.
              maxLength: 4096
              pattern: ^.{0,1024}$
              type: string
              example: 'Request took too long to complete.'
          instance:
              description: |
                An absolute URI that identifies the specific occurrence of the
                problem.
                It may or may not yield further information if dereferenced.
              format: uri
              maxLength: 2048
              type: string
          status:
              description: |
                The HTTP status code generated by the origin server for this
                occurrence
                of the problem.
              exclusiveMaximum: true
              format: int32
              maximum: 600
              minimum: 100
              type: integer
              example: 503
          title:
              description: |
                A short, summary of the problem type. Written in english and
                readable
                for engineers (usually not suited for non technical stakeholders
                and not localized);
              maxLength: 64
              pattern: ^[ -~]{0,64}$
              type: string
              example: 'Service Unavailable'
          type:
              description: |
                An absolute URI that identifies the problem type. When
                dereferenced,
                it SHOULD provide human-readable documentation for the problem
                type
                (e.g., using HTML).
              default: about:blank
              format: uri
              maxLength: 2048
              type: string
              example: 'https://tools.ietf.org/html/rfc7231#section-6.6.4'  
    ErrorResponse:
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
    AckResponse:
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        status: 200
        title: "Richiesta acquisita"
    ConfermaAppaltoResponse:
      description: Risposta all'operazione Conferma Appalto
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      required:  # List the required properties here
        - idAvviso
      properties:
        idAvviso:
          description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      example:
        status: 200
        title: "Operazione Effettuata" 
        idAvviso: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    CreaSchedaResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idScheda
      properties:
        idScheda:
          description: Identificativo univoco della scheda definito da ANAC. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      example:
        detail: "Creazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
        idScheda: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    ModificaSchedaResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idScheda
      properties:
        idScheda:
          description: Identificativo univoco dell'appalto' definito da ANAC. Restituito dall'operazione di creazione Appalto. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6" 
      example:
        detail: "Sostituzione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
        idScheda: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"    
    ConfermaSchedaResponse:
      description: Risposta all'operazione Conferma Scheda
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      properties:
        idAvviso:
          description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      example:
        status: 200
        title: "Operazione Effettuata" 
        idAvviso: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    ConfermaPianoResponse:
      description: Risposta all'operazione Conferma Piano
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      properties:
        idAvviso:
          description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      example:
        status: 200
        title: "Operazione Effettuata" 
        idAvviso: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"    
    CancellaSchedaResponse:
      description: Risposta all'operazione Cancella Scheda
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        detail: "Cancellazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"  
    ModificaAvvisoResponse:
      description: Risposta all'operazione Modifica Avviso
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      required:  # List the required properties here
        - idAvviso
      properties:
        idAvviso:
          description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    RettificaAvvisoResponse:
      description: Risposta all'operazione Rettifica Avviso
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      required:  # List the required properties here
        - idAvviso
      properties:
        idAvviso:
          description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"          
  securitySchemes:
    apiKeyAuth:
      type: apiKey
      name: apiKeyAuth # name of the header, query parameter or cookie
      in: header  # can be "header", "query" or "cookie"
